"use strict";(self["webpackChunkvue_week6"]=self["webpackChunkvue_week6"]||[]).push([[688],{7453:function(e,t,a){a.d(t,{Z:function(){return k}});var l=a(3396),s=a(7139),i=a(9242);const n={key:0,class:"productModal"},o={class:"delete__content"},r={key:0},d={key:1},c={key:2},p={key:3},u={class:"d-flex jy-content-between bg--dark--secondary py-1"};function h(e,t,a,h,g,w){return g.isShow?((0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("h2",null,"刪除"+(0,s.zw)(g.type),1),(0,l._)("div",o,["訂單"===g.type?((0,l.wg)(),(0,l.iD)("p",r,"確定要刪除 "+(0,s.zw)(a.data.user.name)+" "+(0,s.zw)(a.data.create_at)+" 的訂單嗎？",1)):"優惠卷"===g.type?((0,l.wg)(),(0,l.iD)("p",d,"確定要刪除 "+(0,s.zw)(a.data.title)+" 這個優惠卷嗎？",1)):"商品"===g.type?((0,l.wg)(),(0,l.iD)("p",c,"確定要刪除 "+(0,s.zw)(a.data.title)+" 這個商品嗎？",1)):"文章"===g.type?((0,l.wg)(),(0,l.iD)("p",p,"確定要刪除 "+(0,s.zw)(a.data.title)+" 的文章嗎？",1)):(0,l.kq)("",!0)]),(0,l._)("div",u,[(0,l._)("a",{onClick:t[0]||(t[0]=(0,i.iM)((t=>e.$emit("closeBack")),["prevent"])),class:"btn btn--danger mx-3",href:"#"},"取消"),(0,l._)("a",{onClick:t[1]||(t[1]=(0,i.iM)((t=>e.$emit("delData",a.data.id)),["prevent"])),class:"btn btn--success mx-3",href:"#"}," 刪除"+(0,s.zw)(g.type),1)])])):(0,l.kq)("",!0)}var g={props:["data"],emits:["delData","closeBack"],data(){return{isShow:!1,type:""}},methods:{openModal(e){this.isShow=!0,this.type=e},closeModal(){this.isShow=!1,this.type=""}}},w=a(89);const _=(0,w.Z)(g,[["render",h],["__scopeId","data-v-f81bf152"]]);var k=_},1894:function(e,t,a){a.d(t,{Z:function(){return _}});var l=a(3396),s=a(7139),i=a(9242);const n=e=>((0,l.dD)("data-v-1b51ac8a"),e=e(),(0,l.Cn)(),e),o=n((()=>(0,l._)("span",null,[(0,l._)("i",{class:"fas fa-chevron-left"}),(0,l.Uk)("Prev")],-1))),r=[o],d=["onClick"],c=n((()=>(0,l._)("span",null,[(0,l.Uk)("Next"),(0,l._)("i",{class:"fas fa-chevron-right"})],-1))),p=[c];function u(e,t,a,n,o,c){return a.pagination.total_pages>1&&void 0!==a.pagination.total_pages?((0,l.wg)(),(0,l.iD)("ul",{key:0,class:"pagination d-flex align-items-center jy-content-center",style:(0,s.j5)({backgroundColor:a.style.bg})},[(0,l.wy)((0,l._)("li",{style:(0,s.j5)(c.styleObject),class:"pagination__prev",onClick:t[0]||(t[0]=t=>e.$emit("getProduct",a.pagination.current_page-1))},r,4),[[i.F8,a.pagination.has_pre]]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.pagination.total_pages,(t=>((0,l.wg)(),(0,l.iD)("li",{class:(0,s.C_)(["pagination__item",{active:t===a.pagination.current_page}]),key:t,style:(0,s.j5)(c.styleObject),onClick:a=>e.$emit("getProduct",t)},[(0,l._)("span",null,(0,s.zw)(t),1)],14,d)))),128)),(0,l.wy)((0,l._)("li",{style:(0,s.j5)(c.styleObject),class:"pagination__next",onClick:t[1]||(t[1]=t=>e.$emit("getProduct",a.pagination.current_page+1))},p,4),[[i.F8,a.pagination.has_next]])],4)):(0,l.kq)("",!0)}var h={props:["pagination","style"],emits:["getProduct"],computed:{styleObject(){return{"--background":this.style.bg,"--background-hover":this.style.hoverBg}}}},g=a(89);const w=(0,g.Z)(h,[["render",u],["__scopeId","data-v-1b51ac8a"]]);var _=w},8688:function(e,t,a){a.r(t),a.d(t,{default:function(){return ae}});var l=a(3396),s=a(7139),i=a(9242);const n={class:"content"},o={class:"admin-container d-flex jy-content-center"},r={class:"total__product w-100 d-flex align-items-center jy-content-between"},d={class:"product w-100 mb-3"},c=(0,l.uE)('<li class="product__title d-flex jy-content-between"><h3 class="text-c-white f-w-bold">訂購日期</h3><div class="info__group w-90"><ul class="d-flex fw-bold"><li class="w-15 f-w-bold">訂購人</li><li class="w-35 f-w-bold">訂購內容</li><li class="w-15 f-w-bold">電話</li><li class="w-10 f-w-bold">總金額</li><li class="w-15 f-w-bold">是否付款</li><li class="w-10 f-w-bold">編輯</li></ul></div></li>',1),p={class:"info__group w-90"},u={class:"d-flex fw-bold align-items-center"},h={class:"w-15"},g={class:"w-35"},w={class:"w-15"},_={class:"w-10"},k={class:"w-15 d-flex jy-content-around align-items-center"},f={key:0,class:"text-left"},m={key:1,class:"text-left"},y=["onClick"],b={class:"w-10 d-flex align-items-center jy-content-center"},v=["onClick"],M=(0,l._)("i",{class:"fa-regular fa-eye"},null,-1),$=[M],D=["onClick"],C=(0,l._)("i",{class:"fas fa-trash-alt"},null,-1),x=[C];function z(e,t,a,M,C,z){const j=(0,l.up)("PageView"),O=(0,l.up)("DelModal"),P=(0,l.up)("OrderModal");return(0,l.wg)(),(0,l.iD)(l.HY,null,[C.back_show?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"back-lock",onClick:t[0]||(t[0]=e=>z.closeAllModal())})):(0,l.kq)("",!0),(0,l._)("div",n,[(0,l._)("div",o,[(0,l._)("div",r,[(0,l._)("p",null,"目前有 "+(0,s.zw)(C.orders.length)+" 筆訂單",1),(0,l._)("a",{onClick:t[1]||(t[1]=(0,i.iM)((e=>z.deleteOrder("all")),["prevent"])),class:"btn btn--danger w-10",href:"#"},"刪除全部訂單")]),(0,l._)("div",d,[(0,l._)("ul",null,[c,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(C.orders,(t=>((0,l.wg)(),(0,l.iD)("li",{key:t.id,class:"product__item d-flex jy-content-between"},[(0,l._)("h3",null,(0,s.zw)(e.$filters.date(t.create_at)),1),(0,l._)("div",p,[(0,l._)("ul",u,[(0,l._)("li",h,(0,s.zw)(t.user.name),1),(0,l._)("li",g,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.products,(t=>((0,l.wg)(),(0,l.iD)("p",{key:t.id,class:"text-left w-100"},[(0,l._)("span",null,(0,s.zw)(t.product.title)+" - "+(0,s.zw)(t.qty)+"份 x "+(0,s.zw)(e.$filters.thColon(t.product.price))+"元 = "+(0,s.zw)(e.$filters.thColon(t.total))+"元 ",1)])))),128))]),(0,l._)("li",w,(0,s.zw)(t.user.tel),1),(0,l._)("li",_,"$"+(0,s.zw)(e.$filters.thColon(t.total)),1),(0,l._)("li",k,[!1===t.is_paid?((0,l.wg)(),(0,l.iD)("span",f,"未付款")):((0,l.wg)(),(0,l.iD)("span",m,"已付款")),(0,l._)("button",{onClick:e=>z.updatePaid(t),class:"pointer",type:"button"},"更新付款狀態",8,y)]),(0,l._)("li",b,[(0,l._)("a",{onClick:(0,i.iM)((e=>z.openModal(t)),["prevent"]),class:"btn btn--success mr-1",href:"#"},$,8,v),(0,l._)("a",{onClick:(0,i.iM)((e=>z.openDelModal("訂單",t)),["prevent"]),class:"btn btn--danger ml-1",href:"#"},x,8,D)])])])])))),128))])])]),(0,l.Wm)(j,{pagination:C.pagination,onGetProduct:z.getOrders,style:{bg:"#1A535C",hoverBg:"#FF6B6B"}},null,8,["pagination","onGetProduct"]),(0,l.Wm)(O,{data:C.tempOrder,onDelData:z.deleteOrder,ref:"delModal",onCloseBack:z.closeAllModal},null,8,["data","onDelData","onCloseBack"]),(0,l.Wm)(P,{order:C.tempOrder,onUpdatePaid:z.updatePaid,ref:"orderModal"},null,8,["order","onUpdatePaid"])])],64)}var j=a(7453);const O={key:0,class:"orderModal"},P={class:"d-flex align-items-center jy-content-between"},S=(0,l._)("p",null,"訂單資訊",-1),U=(0,l._)("i",{class:"fa-solid fa-xmark"},null,-1),A=[U],B={class:"content"},Z=(0,l.Uk)("訂購日期: "),q=(0,l.Uk)("姓名: "),L=(0,l.Uk)("電話: "),H=(0,l.Uk)("Email: "),Y=(0,l.Uk)("住址: "),F=(0,l.Uk)("付款方式: "),K={class:"paid"},W=(0,l.Uk)("付款狀態: "),E={key:0,class:"text-success"},G={key:1,class:"text-danger"},I=(0,l._)("li",{class:"mb-2",style:{padding:"0"}},"訂購內容:",-1),V=(0,l.Uk)("總金額: ");function N(e,t,a,i,n,o){return n.isShow?((0,l.wg)(),(0,l.iD)("div",O,[(0,l._)("h3",P,[S,(0,l._)("span",{onClick:t[0]||(t[0]=(...e)=>o.closeModal&&o.closeModal(...e))},A)]),(0,l._)("div",B,[(0,l._)("p",null,[Z,(0,l._)("span",null,(0,s.zw)(a.order.create_at),1)]),(0,l._)("p",null,[q,(0,l._)("span",null,(0,s.zw)(a.order.user.name),1)]),(0,l._)("p",null,[L,(0,l._)("span",null,(0,s.zw)(a.order.user.tel),1)]),(0,l._)("p",null,[H,(0,l._)("span",null,(0,s.zw)(a.order.user.email),1)]),(0,l._)("p",null,[Y,(0,l._)("span",null,(0,s.zw)(a.order.user.address),1)]),(0,l._)("p",null,[F,(0,l._)("span",null,(0,s.zw)(a.order.payment),1)]),(0,l._)("p",K,[W,a.order.is_paid?((0,l.wg)(),(0,l.iD)("span",E,"已付款")):((0,l.wg)(),(0,l.iD)("span",G,"未付款")),(0,l._)("button",{onClick:t[1]||(t[1]=t=>e.$emit("updatePaid",a.order)),class:"pointer",type:"button"},"更新付款狀態")]),(0,l._)("ul",null,[I,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.order.products,(t=>((0,l.wg)(),(0,l.iD)("li",{key:t.id},(0,s.zw)(t.product.title)+" - "+(0,s.zw)(t.qty)+(0,s.zw)(t.product.unit)+" x "+(0,s.zw)(e.$filters.thColon(t.product.price))+"元 = "+(0,s.zw)(e.$filters.thColon(t.total))+"元 ",1)))),128))]),(0,l._)("p",null,[V,(0,l._)("span",null,"$"+(0,s.zw)(e.$filters.thColon(a.order.total)),1)])])])):(0,l.kq)("",!0)}var J={props:["order"],emits:["updatePaid"],data(){return{isShow:!1}},methods:{openModal(){this.isShow=!0},closeModal(){this.isShow=!1}}},Q=a(89);const R=(0,Q.Z)(J,[["render",N]]);var T=R,X=a(1894),ee={data(){return{orders:[],tempOrder:{},pagination:{},back_show:!1}},components:{DelModal:j.Z,OrderModal:T,PageView:X.Z},methods:{getOrders(e=1){this.$emitter.emit("isAdminLoading",!0),this.orders=[],this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/ginjack/admin/orders?page=${e}`).then((e=>{this.orders=e.data.orders,this.pagination=e.data.pagination,this.$emitter.emit("isAdminLoading",!1)})).catch((e=>{this.$emitter.emit("isAdminLoading",!1),this.$httpMessageState(e.response,"獲取訂單列表")}))},deleteOrder(e){this.$emitter.emit("isAdminLoading",!0);let t=`https://vue3-course-api.hexschool.io/v2/api/ginjack/admin/order/${e}`;"all"===e&&(t="https://vue3-course-api.hexschool.io/v2/api/ginjack/admin/orders/all"),this.$http.delete(t).then((e=>{this.$refs.delModal.closeModal(),this.back_show=!1,this.getOrders(this.pagination.current_page),this.$httpMessageState(e,"刪除訂單")})).catch((e=>{this.$emitter.emit("isAdminLoading",!1),this.$httpMessageState(e.response,"刪除訂單")}))},openDelModal(e,t){this.back_show=!0,this.$refs.delModal.openModal(e),this.tempOrder=t},openModal(e){this.$refs.orderModal.openModal(),this.tempOrder=e},updatePaid(e){this.$emitter.emit("isAdminLoading",!0);const t={data:{...e,is_paid:!e.is_paid}};this.$http.put(`https://vue3-course-api.hexschool.io/v2/api/ginjack/admin/order/${e.id}`,t).then((e=>{const t=this.$refs.orderModal;t.closeModal(),this.getOrders(this.pagination.current_page),this.$httpMessageState(e,"更新付款資訊")})).catch((e=>{this.$emitter.emit("isAdminLoading",!1),this.$httpMessageState(e.response,"更新付款資訊")}))},closeAllModal(){this.$refs.orderModal.closeModal(),this.$refs.delModal.closeModal(),this.back_show=!1}},mounted(){this.getOrders()}};const te=(0,Q.Z)(ee,[["render",z]]);var ae=te}}]);
//# sourceMappingURL=688.d107c421.js.map