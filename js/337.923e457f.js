"use strict";(self["webpackChunkvue_week6"]=self["webpackChunkvue_week6"]||[]).push([[337],{9337:function(e,s,a){a.r(s),a.d(s,{default:function(){return Z}});var t=a(3396),i=a(7139),r=a(9242);const o={class:"userInfo mb-10 mb-sm-5"},l=(0,t._)("h3",{class:"text-medium py-4 px-5 mb-10 mb-sm-5 mt-sm-5"},"訂購資料",-1),m={class:"row"},n={class:"col-lg-6"},d={class:"form-control mb-2"},c={for:"name",class:"mb-1"},u=(0,t.Uk)(" 訂購人 "),p={class:"form-control mb-2"},h={for:"email",class:"mb-1"},_=(0,t.Uk)(" 信箱 "),v={class:"form-control mb-2"},f={for:"region",class:"mb-1"},b=(0,t.Uk)(" 地區選擇 "),w=(0,t._)("option",{value:""},"請選擇地區",-1),g=(0,t._)("option",{value:"台北市"},"台北市",-1),k=(0,t._)("option",{value:"高雄市"},"高雄市",-1),C={class:"form-control mb-2"},V={for:"phone",class:"mb-1"},y=(0,t.Uk)(" 電話 "),$={class:"form-control mb-2"},x=(0,t._)("label",{for:"message",class:"mb-1"},"留言",-1),W={class:"col-lg-6 mt-7 mb-sm-7"},U={class:"row"},I={class:"col-sm-6"},j=(0,t._)("span",null,"信用卡付款",-1),M={class:"icon"},S={class:"col-sm-6"},z=(0,t._)("span",null,"現金付款",-1),L={class:"icon"},q=(0,t._)("div",{class:"col-lg-12 d-sm-none"},[(0,t._)("button",{class:"user-btn user-btn-primary w-100 py-4 mb-0 mt-auto f-size-xs",type:"submit"}," 下一步：完成付款 ")],-1),B=(0,t._)("button",{class:"cart-check-btn user-btn user-btn-primary w-100 py-3 f-size-xs",type:"submit"},"下一步：完成付款",-1);function F(e,s,a,F,H,E){const O=(0,t.up)("ErrorMessage"),P=(0,t.up)("FieldView"),D=(0,t.up)("CreditCardIcon"),Z=(0,t.up)("CashIcon"),A=(0,t.up)("FormView");return(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",o,[l,(0,t.Wm)(A,{onSubmit:E.onSubmit,class:"px-5 px-md-0"},{default:(0,t.w5)((({errors:e})=>[(0,t._)("div",m,[(0,t._)("div",n,[(0,t._)("div",d,[(0,t._)("label",c,[u,(0,t.Wm)(O,{name:"name",class:"invalid-feedback"})]),(0,t.Wm)(P,{id:"name",name:"name",type:"text",class:(0,i.C_)(["form-input",{"is-invalid":e["name"]}]),placeholder:"請輸入 姓名",rules:"required",modelValue:H.form.user.name,"onUpdate:modelValue":s[0]||(s[0]=e=>H.form.user.name=e)},null,8,["class","modelValue"])]),(0,t._)("div",p,[(0,t._)("label",h,[_,(0,t.Wm)(O,{name:"email",class:"invalid-feedback"})]),(0,t.Wm)(P,{id:"email",name:"email",type:"email",class:(0,i.C_)(["form-input",{"is-invalid":e["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:H.form.user.email,"onUpdate:modelValue":s[1]||(s[1]=e=>H.form.user.email=e)},null,8,["class","modelValue"])]),(0,t._)("div",v,[(0,t._)("label",f,[b,(0,t.Wm)(O,{name:"address",class:"invalid-feedback"})]),(0,t.Wm)(P,{id:"address",name:"address",class:(0,i.C_)({"is-invalid":e["address"]}),placeholder:"請輸入地區",rules:"required",as:"select",modelValue:H.form.user.address,"onUpdate:modelValue":s[2]||(s[2]=e=>H.form.user.address=e)},{default:(0,t.w5)((()=>[w,g,k])),_:2},1032,["class","modelValue"])]),(0,t._)("div",C,[(0,t._)("label",V,[y,(0,t.Wm)(O,{name:"電話",class:"invalid-feedback"})]),(0,t.Wm)(P,{id:"phone",name:"電話",type:"text",class:(0,i.C_)({"is-invalid":e["電話"]}),placeholder:"請輸入電話",rules:E.isPhone,modelValue:H.form.user.tel,"onUpdate:modelValue":s[3]||(s[3]=e=>H.form.user.tel=e)},null,8,["class","rules","modelValue"])]),(0,t._)("div",$,[x,(0,t.Wm)(P,{id:"message",name:"message",type:"text",modelValue:H.form.message,"onUpdate:modelValue":s[4]||(s[4]=e=>H.form.message=e),as:"textarea"},null,8,["modelValue"])])]),(0,t._)("div",W,[(0,t._)("div",U,[(0,t._)("div",I,[(0,t._)("div",{class:(0,i.C_)(["pay_credit",{active:1==H.is_credit}]),onClick:s[5]||(s[5]=e=>H.is_credit=!0)},[j,(0,t._)("span",M,[(0,t.Wm)(D)])],2)]),(0,t._)("div",S,[(0,t._)("div",{class:(0,i.C_)(["pay_cash",{active:0==H.is_credit}]),onClick:s[6]||(s[6]=e=>H.is_credit=!1)},[z,(0,t._)("span",L,[(0,t.Wm)(Z)])],2)]),q])])]),B])),_:1},8,["onSubmit"])],512)),[[r.F8,H.is_show]])}function H(e,s){return(0,t.wg)(),(0,t.j4)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[(0,t.Wm)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})])}function E(e,s){return(0,t.wg)(),(0,t.j4)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[(0,t.Wm)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})])}var O={props:["show"],data(){return{is_credit:!1,is_show:!1,form:{user:{}}}},components:{CreditCardIcon:H,CashIcon:E},methods:{onSubmit(){this.$emitter.emit("isLoading",!0);const e=this.form;this.$http.post("https://vue3-course-api.hexschool.io/v2/api/ginjack/order",{data:e}).then((e=>{this.is_credit?this.payOrder(e.data.orderId):(this.$emitter.emit("isLoading",!1),this.$emitter.emit("updateCart",{carts:[]}),this.$router.push({name:"完成結帳頁面",params:{show_complete:!0,id:e.data.orderId}}))})).catch((e=>{this.$emitter.emit("isLoading",!1),this.$httpMessageState(e.response,"結帳")}))},payOrder(e){this.$http.post(`https://vue3-course-api.hexschool.io/v2/api/ginjack/pay/${e}`).then((()=>{this.$emitter.emit("isLoading",!1),this.$emitter.emit("updateCart",{carts:[]}),this.$router.push({name:"完成結帳頁面",params:{show_complete:!0,id:e}})})).catch((e=>{this.$emitter.emit("isLoading",!1),this.$httpMessageState(e.response,"信用卡付款")}))},isPhone(e){const s=/^(09)[0-9]{8}$/;return!!s.test(e)||"需要正確的電話號碼"}},mounted(){this.show?(this.is_show=!0,this.$emitter.emit("changeBar",2)):this.$router.push("/cart")}},P=a(89);const D=(0,P.Z)(O,[["render",F]]);var Z=D}}]);
//# sourceMappingURL=337.923e457f.js.map