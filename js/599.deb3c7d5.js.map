{"version":3,"file":"js/599.deb3c7d5.js","mappings":"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","sources":["webpack://vue-week6/./src/views/PayView1.vue","webpack://vue-week6/./src/views/PayView1.vue?5bd9"],"sourcesContent":["<template>\n  <ul v-if=\"carts?.carts?.length\" class=\"mb-10\">\n    <li class=\"row py-4 bg-secondary d-sm-none\">\n      <div class=\"col-sm-4\">\n        <p class=\"text-center text-c-white\">商品</p>\n      </div>\n      <div class=\"col-sm-2\">\n        <p class=\"text-center text-c-white\">數量</p>\n      </div>\n      <div class=\"col-sm-2\">\n        <p class=\"text-center text-c-white\">售價</p>\n      </div>\n      <div class=\"col-sm-2\">\n        <p class=\"text-center text-c-white\">小計</p>\n      </div>\n      <div class=\"col-sm-2\">\n        <p class=\"text-center text-c-white\">操作</p>\n      </div>\n    </li>\n    <li\n      class=\"row py-4 bg-white align-items-center border-b-1\"\n      v-for=\"item in carts.carts\"\n      :key=\"item.id\"\n    >\n      <div class=\"col-sm-4 d-flex jy-content-center jy-content-sm-start mb-sm-2\">\n        <div\n          class=\"img-bg px-1\"\n          :style=\"{ backgroundImage: 'url(' + item.product.imageUrl + ')' }\"\n        ></div>\n        <div class=\"content px-3\">\n          <h3 class=\"text-medium\">{{ item.product.title }}</h3>\n          <p>\n            規格：{{ item.product.unit }}<br/>\n            <span class=\"d-md-none d-sm-block\">重量：{{ item.product.content }}</span>\n          </p>\n        </div>\n      </div>\n      <div class=\"col-xs-6 col-sm-2\">\n        <select\n          class=\"py-2\"\n          name=\"qty\"\n          id=\"qty\"\n          v-model=\"item.qty\"\n          @change=\"updateCart(item, item.qty)\"\n        >\n          <option v-for=\"(qty, key) in item.qty + 10\" :key=\"qty + key\" :value=\"qty\">\n            {{ qty }}\n          </option>\n        </select>\n      </div>\n      <div class=\"col-2 d-sm-none\">\n        <p class=\"text-medium text-center text-c-primary\">\n          NT ${{ item.product.price }}\n        </p>\n      </div>\n      <div class=\"col-xs-4 col-sm-2\">\n        <p class=\"text-medium text-center text-c-primary\">\n          NT ${{ item.total }}\n        </p>\n      </div>\n      <div class=\"col-2\">\n        <button\n          type=\"button\"\n          class=\"user-btn user-btn-primary m-auto py-1 px-2\"\n          @click=\"deleteCart(item.id)\"\n        >\n          <span class=\"text-c-white\"> X </span>\n        </button>\n      </div>\n    </li>\n    <li class=\"row py-4 bg-white align-items-center border-b-1 jy-content-end\">\n      <div class=\"col-xs-5 col-sm-2\">\n        <p class=\"text-medium text-center text-c-primary text-sm-right\">總計</p>\n      </div>\n      <div class=\"col-xs-5 col-sm-2\">\n        <p class=\"text-medium text-center text-c-primary f-size-s text-sm-right\">\n          NT ${{ carts.total }}\n        </p>\n      </div>\n    </li>\n    <li class=\"row py-6 bg-white jy-content-between\">\n      <div class=\"col-sm-6 col-md-4 d-flex flex-dir-col jy-content-between\">\n        <div class=\"coupon d-flex mb-sm-4\">\n          <input\n            class=\"w-60 p-2 f-size-xs\" type=\"text\" id=\"coupon\"\n            v-model=\"coupon\"\n            :readonly=\"carts.total !== carts.final_total\"\n          >\n          <button\n            class=\"user-btn user-btn-primary py-2 flex-auto\"\n            type=\"button\"\n            @click=\"useCoupon\"\n            :disabled=\"carts.total !== carts.final_total\"\n          >\n            <span v-if=\"carts.total == carts.final_total\">使用優惠卷</span>\n            <span v-else>已使用過優惠卷</span>\n          </button>\n        </div>\n        <p class=\"text-medium d-flex jy-content-between mb-sm-2\">\n          <span>商品小計</span>\n          <span class=\"text-c-primary f-w-bold\">NT$ {{ carts.total }}</span>\n        </p>\n        <p class=\"text-medium d-flex jy-content-between mb-sm-2\">\n          <span>優惠折扣</span>\n          <span class=\"text-c-primary f-w-bold\">\n            NT$ {{ Math.round(carts.total - carts.final_total) }}\n          </span>\n        </p>\n      </div>\n      <div class=\"col-sm-6 col-md-4\">\n        <p class=\"text-sm-right\">\n          結帳金額<br>\n          <span class=\"text-c-primary f-size-s f-w-bold my-2 d-block\">\n            NT$ {{ Math.round(carts.final_total) }}\n          </span>\n        </p>\n        <button\n          class=\"user-btn user-btn-primary w-100 py-3 f-size-xs d-sm-none\" type=\"button\"\n          @click=\"routerTo\"\n        >下一步：填寫資料</button>\n      </div>\n    </li>\n  </ul>\n  <button\n    v-if=\"carts?.carts?.length\"\n    class=\"cart-check-btn user-btn user-btn-primary w-100 py-3 f-size-xs\" type=\"button\"\n    @click=\"routerTo\"\n  >下一步：填寫資料</button>\n  <div v-show=\"carts?.carts?.length === 0\" class=\"empty-cart mb-20 mt-sm-20\">\n    <h3 class=\"text-title text-c-forthary text-center mb-4\">購物車是空的</h3>\n    <router-link to=\"/product\">\n      <button class=\"user-btn user-btn-primary mx-auto py-4 px-10 f-size-s\">前往選購商品</button>\n    </router-link>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      carts: [],\n      coupon: ''\n    }\n  },\n  methods: {\n    getCarts () {\n      this.$emitter.emit('isLoading', true)\n      this.$http\n        .get(`${process.env.VUE_APP_APIURL}/api/${process.env.VUE_APP_PATH}/cart`)\n        .then((res) => {\n          this.$emitter.emit('isLoading', false)\n          this.carts = res.data.data\n          if (this.carts.carts.length === 0) {\n            this.$emitter.emit('changeBar', 0)\n            this.$emitter.emit('updateCart', res.data.data)\n            this.$emitter.emit('isLoading', false)\n            return\n          }\n          this.$emitter.emit('changeBar', 1)\n          this.$emitter.emit('isLoading', false)\n        })\n        .catch((err) => {\n          console.log(err)\n          this.$emitter.emit('isLoading', false)\n        })\n    },\n    updateCart (item, qty) {\n      this.$emitter.emit('isLoading', true)\n      const data = {\n        product_id: item.product_id,\n        qty: qty\n      }\n      this.$http\n        .put(`${process.env.VUE_APP_APIURL}/api/${process.env.VUE_APP_PATH}/cart/${item.id}`, { data })\n        .then(() => {\n          this.getCarts()\n        })\n        .catch((err) => {\n          this.$emitter.emit('isLoading', false)\n          console.dir(err)\n        })\n    },\n    deleteCart (id) {\n      this.$emitter.emit('isLoading', true)\n      this.$http\n        .delete(`${process.env.VUE_APP_APIURL}/api/${process.env.VUE_APP_PATH}/cart/${id}`)\n        .then(() => {\n          this.getCarts()\n        })\n        .catch((err) => {\n          this.$emitter.emit('isLoading', false)\n          console.dir(err)\n        })\n    },\n    useCoupon () {\n      if (this.coupon === '') {\n        alert('欄位不可為空')\n        return\n      }\n      this.$emitter.emit('isLoading', true)\n      const data = {\n        code: this.coupon\n      }\n      this.$http\n        .post(`${process.env.VUE_APP_APIURL}/api/${process.env.VUE_APP_PATH}/coupon`, { data })\n        .then((res) => {\n          this.getCarts()\n        })\n        .catch(() => {\n          this.$emitter.emit('isLoading', false)\n          this.$swal({ icon: 'error', title: '失敗', text: '查無此優惠卷' })\n        })\n    },\n    routerTo () {\n      this.$router.push({ name: '資料輸入頁面', params: { show: true } })\n    }\n  },\n  mounted () {\n    this.getCarts()\n    this.coupon = localStorage.getItem('couponText')\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  .cart{\n    &-title{\n      padding: 5% 0;\n    }\n    .img-bg{\n      background-size: cover;\n      background-position: center center;\n      flex: 0 0 30%;\n      @include pad{\n        flex: 0 0 50%;\n        height: 100px;\n      }\n      @include mobile{\n        flex: 0 0 30%;\n        height: 150px;\n      }\n      @media screen and (max-width: 440px) {\n        flex: 0 0 40%;\n      }\n    }\n    select{\n      width: 100%;\n      text-align: center;\n      &:focus{\n        outline: none;\n      }\n    }\n    @include pad{\n      .content{\n        display: flex;\n        flex-direction: column;\n        justify-content: space-around;\n      }\n    }\n    .text-sm-right{\n      @include mobile{\n        text-align: right;\n      }\n    }\n  }\n  .cart-check-btn{\n    display: none;\n    @include mobile{\n      display: block;\n      position: fixed;\n      margin-left: -15px;\n      margin-bottom: -2px;\n      width: 100%;\n      bottom: 0;\n    }\n  }\n</style>\n","import { render } from \"./PayView1.vue?vue&type=template&id=139e9a8c&scoped=true\"\nimport script from \"./PayView1.vue?vue&type=script&lang=js\"\nexport * from \"./PayView1.vue?vue&type=script&lang=js\"\n\nimport \"./PayView1.vue?vue&type=style&index=0&id=139e9a8c&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/ginjack/Desktop/vue-week6/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-139e9a8c\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_17","$data","carts","length","_createElementBlock","_hoisted_2","_Fragment","_renderList","item","key","id","style","backgroundImage","product","imageUrl","_toDisplayString","title","unit","_hoisted_6","content","name","qty","$event","onChange","$options","value","_hoisted_10","price","total","type","onClick","_hoisted_20","readonly","final_total","disabled","_hoisted_28","_hoisted_29","_hoisted_31","_hoisted_34","Math","round","_hoisted_39","_hoisted_42","_createVNode","_component_router_link","to","_hoisted_43","data","coupon","methods","getCarts","this","$emitter","emit","$http","get","then","res","catch","err","console","log","updateCart","product_id","put","dir","deleteCart","delete","useCoupon","alert","code","post","$swal","icon","text","routerTo","$router","push","params","show","mounted","localStorage","getItem","__exports__","render"],"sourceRoot":""}