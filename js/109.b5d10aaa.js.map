{"version":3,"file":"js/109.b5d10aaa.js","mappings":"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","sources":["webpack://vue-week6/./src/views/OrderView.vue","webpack://vue-week6/./src/views/OrderView.vue?77c4"],"sourcesContent":["<template>\n  <div class=\"order_search\">\n    <div class=\"order-banner\" :style=\"{ backgroundImage: `url( ${require('@/assets/images/about_bg.jpeg')})`}\">\n      <div class=\"container\">\n        <h3>客戶訂單查詢</h3>\n      </div>\n    </div>\n    <div class=\"container py-10\">\n      <div class=\"row jy-content-center\">\n        <div class=\"col-md-10 col-lg-4\">\n          <h3 class=\"text-title py-5 text-center f-size-m\">訂單查詢</h3>\n          <div class=\"form-control mb-10\">\n            <label class=\"mb-2\" for=\"order_id\">訂單編號</label>\n            <div class=\"p-relative\">\n              <input type=\"text\" id=\"order_id\" v-model.trim=\"order_id\" placeholder=\"請輸入訂單編號\">\n              <div class=\"search\" @click=\"searchHandler\">\n                <p>查詢</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div v-if=\"searchOrder.id !== undefined\" class=\"row jy-content-center\">\n        <div class=\"col-md-10 col-lg-6\">\n          <div class=\"order-info\">\n            <h5 class=\"text-medium mb-2\">\n              <span class=\"title\">訂單編號</span>:\n              <span class=\"content\">{{ searchOrder.id }}</span>\n            </h5>\n            <p class=\"text-medium mb-2\">\n              <span class=\"title\">訂購人</span>:\n              <span class=\"content\">{{ searchOrder.user.name }}</span>\n            </p>\n            <p class=\"text-medium mb-2\">\n              <span class=\"title\">訂單日期</span>:\n              <span class=\"content\">{{ $filters.date(searchOrder.create_at) }}</span>\n            </p>\n            <p class=\"text-medium mb-2\">\n              <span class=\"title\">付款狀態</span>:\n              <span\n                class=\"content is_paid\"\n                :class=\"{'is_paid_none': searchOrder.is_paid === false}\"\n              >{{ searchOrder.is_paid ? '已付款' : '未付款' }}</span>\n            </p>\n            <p class=\"text-medium mb-2\">\n              <span class=\"title\">訂購品項</span>:\n              <ul class=\"content\">\n                  <li v-for=\"item in searchOrder.products\" :key=\"item.id\">\n                    {{ item.product.title }} {{ item.product.unit }} X {{ item.qty }}\n                  </li>\n              </ul>\n            </p>\n            <p class=\"text-medium mb-2\">\n              <span class=\"title\">總金額</span>:\n              <span class=\"content\">${{ $filters.thColon(searchOrder.total) }}</span>\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      orders: [],\n      current_page: 1,\n      order_id: '',\n      searchOrder: {}\n    }\n  },\n  methods: {\n    getOrders (page = 1) {\n      this.$emitter.emit('isLoading', true)\n      this.$http\n        .get(`${process.env.VUE_APP_APIURL}/api/${process.env.VUE_APP_PATH}/orders?page=${page}`)\n        .then((res) => {\n          this.orders = [...this.orders, ...res.data.orders]\n          const pagination = res.data.pagination\n          if (this.current_page < pagination.total_pages) {\n            this.getOrders(this.current_page + 1)\n            this.current_page += 1\n          } else {\n            this.$emitter.emit('isLoading', false)\n          }\n        })\n        .catch((err) => {\n          this.$emitter.emit('isLoading', false)\n          console.dir(err)\n        })\n    },\n    searchHandler () {\n      this.$emitter.emit('isLoading', true)\n      this.searchOrder = this.orders.filter(order => order.id === this.order_id)\n      if (this.searchOrder.length === 0) {\n        setTimeout(() => {\n          this.$swal({ icon: 'error', title: '失敗', text: '找不到此訂單' })\n          this.$emitter.emit('isLoading', false)\n        }, 1500)\n      } else {\n        setTimeout(() => {\n          this.searchOrder = { ...this.searchOrder[0] }\n          this.order_id = ''\n          this.$emitter.emit('isLoading', false)\n        }, 1500)\n      }\n    }\n  },\n  mounted () {\n    this.getOrders()\n  }\n}\n</script>\n\n<style lang=\"scss\">\n  .order-banner{\n    background-size: cover;\n    background-position: center center;\n    padding-top: 80px;\n    height: 400px;\n    @include mobile {\n      height: 250px;\n    }\n    h3{\n      padding-left: 10%;\n      font-size: 2.25rem;\n      letter-spacing:5px;\n      margin-top: 10%;\n    }\n  }\n  .order_search{\n    .order-info{\n      background-color: #eee;\n      padding: 12px;\n      h5, p {\n        display: flex;\n        justify-content: space-between;\n      }\n      .title{\n        text-align: justify;\n        text-align-last: justify;\n        flex: 1 0 auto;\n      }\n      .content{\n        flex: 0 0 80%;\n        padding-left: 16px;\n        @include pad{\n          flex: 0 0 90%;\n        }\n        @include mobile {\n          flex: 0 0 80%;\n        }\n        &.is_paid{\n          color: #198754 !important;\n        }\n        &.is_paid_none{\n          color: red !important;\n        }\n      }\n    }\n    h3{\n      letter-spacing: 5px;\n      margin-bottom: 20px;\n    }\n    .form-control{\n      text-align: center;\n      label{\n        display: block;\n        text-align: left;\n      }\n      input{\n        width: 100%;\n        padding: 8px 12px;\n      }\n      .search{\n        position: absolute;\n        top: 0;\n        right: 0;\n        background-color: #555;\n        height: 100%;\n        padding: 0 10px;\n        cursor: pointer;\n        p{\n          color: white;\n          font-weight: bold;\n          line-height: 40.5px;\n        }\n      }\n    }\n  }\n</style>\n","import { render } from \"./OrderView.vue?vue&type=template&id=2385415c\"\nimport script from \"./OrderView.vue?vue&type=script&lang=js\"\nexport * from \"./OrderView.vue?vue&type=script&lang=js\"\n\nimport \"./OrderView.vue?vue&type=style&index=0&id=2385415c&lang=scss\"\n\nimport exportComponent from \"/Users/ginjack/Desktop/vue-week6/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_2","for","_hoisted_11","_createElementBlock","style","backgroundImage","require","_hoisted_7","_hoisted_9","type","id","$data","$event","placeholder","onClick","$options","undefined","_hoisted_17","_toDisplayString","_hoisted_21","user","name","_hoisted_25","_ctx","date","create_at","_hoisted_29","is_paid","_hoisted_32","_Fragment","_renderList","products","item","key","product","title","unit","qty","_hoisted_36","thColon","total","data","orders","current_page","order_id","searchOrder","methods","getOrders","page","this","$emitter","emit","$http","get","then","res","pagination","total_pages","catch","err","console","dir","searchHandler","filter","order","length","setTimeout","$swal","icon","text","mounted","__exports__","render"],"sourceRoot":""}