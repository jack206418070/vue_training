{"version":3,"file":"js/337.923e457f.js","mappings":"yMACwBA,MAAM,0B,GAC1BC,EAAAA,EAAAA,GAAiE,MAA7DD,MAAM,+CAA8C,QAAI,G,GAErDA,MAAM,O,GACJA,MAAM,Y,GACJA,MAAM,qB,GACFE,IAAI,OAAOF,MAAM,Q,WAAO,S,GAe5BA,MAAM,qB,GACFE,IAAI,QAAQF,MAAM,Q,WAAO,Q,GAkB7BA,MAAM,qB,GACFE,IAAI,SAASF,MAAM,Q,WAAO,U,GAgB/BC,EAAAA,EAAAA,GAA+B,UAAvBE,MAAM,IAAG,SAAK,G,GACtBF,EAAAA,EAAAA,GAAgC,UAAxBE,MAAM,OAAM,OAAG,G,GACvBF,EAAAA,EAAAA,GAAgC,UAAxBE,MAAM,OAAM,OAAG,G,GAGtBH,MAAM,qB,GACFE,IAAI,QAAQF,MAAM,Q,WAAO,Q,GAc7BA,MAAM,qB,GACTC,EAAAA,EAAAA,GAA4C,SAArCC,IAAI,UAAUF,MAAM,QAAO,MAAE,G,GAUnCA,MAAM,yB,GACJA,MAAM,O,GACJA,MAAM,Y,GAMPC,EAAAA,EAAAA,GAAkB,YAAZ,SAAK,G,GACLD,MAAM,Q,GAKXA,MAAM,Y,GAMPC,EAAAA,EAAAA,GAAiB,YAAX,QAAI,G,GACJD,MAAM,Q,GAKhBC,EAAAA,EAAAA,GAOM,OAPDD,MAAM,uBAAqB,EAC9BC,EAAAA,EAAAA,GAKS,UAJPD,MAAM,8DACNI,KAAK,UACN,gBAJH,G,GAWNH,EAAAA,EAAAA,GAGkB,UAFhBD,MAAM,gEACNI,KAAK,UACN,YAAQ,G,wLAhIbC,EAAAA,EAAAA,IAkIM,MAlIN,EAkIM,CAjIJC,GACAC,EAAAA,EAAAA,IA+HWC,EAAA,CA/HoBC,SAAQC,EAAAA,SAAUV,MAAM,gBAAvD,C,kBACE,EADkBW,OAAAA,KAAM,EACxBV,EAAAA,EAAAA,GAyHM,MAzHN,EAyHM,EAxHJA,EAAAA,EAAAA,GAmFM,MAnFN,EAmFM,EAlFJA,EAAAA,EAAAA,GAeM,MAfN,EAeM,EAdJA,EAAAA,EAAAA,GAGQ,QAHR,EAGQ,IADNM,EAAAA,EAAAA,IAAkEK,EAAA,CAApDC,KAAK,OAAOb,MAAM,wBAElCO,EAAAA,EAAAA,IASaO,EAAA,CARXC,GAAG,OACHF,KAAK,OACLT,KAAK,OACLJ,OAAK,SAAC,aAAY,cACMW,EAAO,WAC/BK,YAAY,SACZC,MAAM,W,WACGC,EAAAA,KAAKC,KAAKN,K,qCAAVK,EAAAA,KAAKC,KAAKN,KAAIO,IARzB,kCAWFnB,EAAAA,EAAAA,GAkBM,MAlBN,EAkBM,EAjBJA,EAAAA,EAAAA,GAMQ,QANR,EAMQ,IAJNM,EAAAA,EAAAA,IAGgBK,EAAA,CAFdC,KAAK,QACLb,MAAM,wBAGVO,EAAAA,EAAAA,IASaO,EAAA,CARXC,GAAG,QACHF,KAAK,QACLT,KAAK,QACLJ,OAAK,SAAC,aAAY,cACMW,EAAO,YAC/BK,YAAY,YACZC,MAAM,iB,WACGC,EAAAA,KAAKC,KAAKE,M,qCAAVH,EAAAA,KAAKC,KAAKE,MAAKD,IAR1B,kCAWFnB,EAAAA,EAAAA,GAqBM,MArBN,EAqBM,EApBJA,EAAAA,EAAAA,GAMQ,QANR,EAMQ,IAJNM,EAAAA,EAAAA,IAGgBK,EAAA,CAFdC,KAAK,UACLb,MAAM,wBAGVO,EAAAA,EAAAA,IAYYO,EAAA,CAXVC,GAAG,UACHF,KAAK,UACJb,OAAK,sBAAkBW,EAAO,aAC/BK,YAAY,QACZC,MAAM,WACNK,GAAG,S,WACMJ,EAAAA,KAAKC,KAAKI,Q,qCAAVL,EAAAA,KAAKC,KAAKI,QAAOH,IAP5B,C,kBASE,IAA+B,CAA/BI,EACAC,EACAC,K,KAXF,gCAcFzB,EAAAA,EAAAA,GAcM,MAdN,EAcM,EAbJA,EAAAA,EAAAA,GAGQ,QAHR,EAGQ,IADNM,EAAAA,EAAAA,IAAgEK,EAAA,CAAlDC,KAAK,KAAKb,MAAM,wBAEhCO,EAAAA,EAAAA,IAQaO,EAAA,CAPXC,GAAG,QACHF,KAAK,KACLT,KAAK,OACJJ,OAAK,sBAAkBW,EAAO,QAC/BK,YAAY,QACXC,MAAOP,EAAAA,Q,WACCQ,EAAAA,KAAKC,KAAKQ,I,qCAAVT,EAAAA,KAAKC,KAAKQ,IAAGP,IAPxB,0CAUFnB,EAAAA,EAAAA,GASM,MATN,EASM,CARJ2B,GACArB,EAAAA,EAAAA,IAMaO,EAAA,CALXC,GAAG,UACHF,KAAK,UACLT,KAAK,O,WACIc,EAAAA,KAAKW,Q,qCAALX,EAAAA,KAAKW,QAAOT,GACrBE,GAAG,YALL,4BASJrB,EAAAA,EAAAA,GAmCM,MAnCN,EAmCM,EAlCJA,EAAAA,EAAAA,GAiCM,MAjCN,EAiCM,EAhCJA,EAAAA,EAAAA,GAWM,MAXN,EAWM,EAVJA,EAAAA,EAAAA,GASM,OARJD,OAAK,SAAC,aAAY,CAAA8B,OACS,GAATZ,EAAAA,aACjBa,QAAK,eAAEb,EAAAA,WAAS,IAHnB,CAKEc,GACA/B,EAAAA,EAAAA,GAEO,OAFP,EAEO,EADLM,EAAAA,EAAAA,IAAiC0B,MAPrC,MAWFhC,EAAAA,EAAAA,GAWM,MAXN,EAWM,EAVJA,EAAAA,EAAAA,GASM,OARJD,OAAK,SAAC,WAAU,CAAA8B,OACW,GAATZ,EAAAA,aACjBa,QAAK,eAAEb,EAAAA,WAAS,IAHnB,CAKEgB,GACAjC,EAAAA,EAAAA,GAEO,OAFP,EAEO,EADLM,EAAAA,EAAAA,IAAqB4B,MAPzB,KAWFC,QAWNC,K,KA3HF,iBAFF,aAAanB,EAAAA,WCCA,SAASoB,EAAOC,EAAMC,GACnC,OAAQC,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAa,MAAO,CACxCC,MAAO,6BACPC,KAAM,OACNC,QAAS,YACT,eAAgB,IAChBC,OAAQ,eACR,cAAe,QACd,EACDvC,EAAAA,EAAAA,IAAa,OAAQ,CACnB,iBAAkB,QAClB,kBAAmB,QACnBwC,EAAG,6FCZM,SAAST,EAAOC,EAAMC,GACnC,OAAQC,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAa,MAAO,CACxCC,MAAO,6BACPC,KAAM,OACNC,QAAS,YACT,eAAgB,IAChBC,OAAQ,eACR,cAAe,QACd,EACDvC,EAAAA,EAAAA,IAAa,OAAQ,CACnB,iBAAkB,QAClB,kBAAmB,QACnBwC,EAAG,yJF0HT,OACEC,MAAO,CAAC,QACRC,OACE,MAAO,CACLC,WAAW,EACXC,SAAS,EACTC,KAAM,CACJjC,KAAM,MAIZkC,WAAY,CACVC,eADU,EAEVC,SAAAA,GAEFC,QAAS,CACP/C,WACEgD,KAAKC,SAASC,KAAK,aAAa,GAChC,MAAMC,EAAQH,KAAKL,KACnBK,KAAKI,MACFC,KAAM,4DAAsE,CAAEb,KAAMW,IACpFG,MAAMC,IACDP,KAAKP,UACPO,KAAKQ,SAASD,EAAIf,KAAKiB,UAGzBT,KAAKC,SAASC,KAAK,aAAa,GAChCF,KAAKC,SAASC,KAAK,aAAc,CAAEQ,MAAO,KAC1CV,KAAKW,QAAQC,KAAK,CAAExD,KAAM,SAAUyD,OAAQ,CAAEC,eAAe,EAAMxD,GAAIiD,EAAIf,KAAKiB,eAEjFM,OAAOC,IACNhB,KAAKC,SAASC,KAAK,aAAa,GAChCF,KAAKiB,kBAAkBD,EAAIE,SAAU,UAG3CV,SAAUC,GACRT,KAAKI,MACFC,KAAM,2DAAoEI,KAC1EH,MAAK,KACJN,KAAKC,SAASC,KAAK,aAAa,GAChCF,KAAKC,SAASC,KAAK,aAAc,CAAEQ,MAAO,KAC1CV,KAAKW,QAAQC,KAAK,CAAExD,KAAM,SAAUyD,OAAQ,CAAEC,eAAe,EAAMxD,GAAImD,QAExEM,OAAOC,IACNhB,KAAKC,SAASC,KAAK,aAAa,GAChCF,KAAKiB,kBAAkBD,EAAIE,SAAU,aAG3CC,QAASzE,GACP,MAAM0E,EAAc,iBACpB,QAAOA,EAAYC,KAAK3E,IAAgB,cAG5C4E,UACMtB,KAAKuB,MACPvB,KAAKN,SAAU,EACfM,KAAKC,SAASC,KAAK,YAAa,IAEhCF,KAAKW,QAAQC,KAAK,W,QG3LxB,MAAMY,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS3C,KAEpE","sources":["webpack://vue-week6/./src/views/PayView2.vue","webpack://vue-week6/./node_modules/@heroicons/vue/outline/esm/CreditCardIcon.js","webpack://vue-week6/./node_modules/@heroicons/vue/outline/esm/CashIcon.js","webpack://vue-week6/./src/views/PayView2.vue?f32a"],"sourcesContent":["<template>\n  <div v-show=\"is_show\" class=\"userInfo mb-10 mb-sm-5\">\n    <h3 class=\"text-medium py-4 px-5 mb-10 mb-sm-5 mt-sm-5\">訂購資料</h3>\n    <FormView v-slot=\"{ errors }\" @submit=\"onSubmit\" class=\"px-5 px-md-0\">\n      <div class=\"row\">\n        <div class=\"col-lg-6\">\n          <div class=\"form-control mb-2\">\n            <label for=\"name\" class=\"mb-1\">\n              訂購人\n              <ErrorMessage name=\"name\" class=\"invalid-feedback\"></ErrorMessage>\n            </label>\n            <FieldView\n              id=\"name\"\n              name=\"name\"\n              type=\"text\"\n              class=\"form-input\"\n              :class=\"{ 'is-invalid': errors['name'] }\"\n              placeholder=\"請輸入 姓名\"\n              rules=\"required\"\n              v-model=\"form.user.name\"\n            ></FieldView>\n          </div>\n          <div class=\"form-control mb-2\">\n            <label for=\"email\" class=\"mb-1\">\n              信箱\n              <ErrorMessage\n                name=\"email\"\n                class=\"invalid-feedback\"\n              ></ErrorMessage>\n            </label>\n            <FieldView\n              id=\"email\"\n              name=\"email\"\n              type=\"email\"\n              class=\"form-input\"\n              :class=\"{ 'is-invalid': errors['email'] }\"\n              placeholder=\"請輸入 Email\"\n              rules=\"email|required\"\n              v-model=\"form.user.email\"\n            ></FieldView>\n          </div>\n          <div class=\"form-control mb-2\">\n            <label for=\"region\" class=\"mb-1\">\n              地區選擇\n              <ErrorMessage\n                name=\"address\"\n                class=\"invalid-feedback\"\n              ></ErrorMessage>\n            </label>\n            <FieldView\n              id=\"address\"\n              name=\"address\"\n              :class=\"{ 'is-invalid': errors['address'] }\"\n              placeholder=\"請輸入地區\"\n              rules=\"required\"\n              as=\"select\"\n              v-model=\"form.user.address\"\n            >\n              <option value=\"\">請選擇地區</option>\n              <option value=\"台北市\">台北市</option>\n              <option value=\"高雄市\">高雄市</option>\n            </FieldView>\n          </div>\n          <div class=\"form-control mb-2\">\n            <label for=\"phone\" class=\"mb-1\">\n              電話\n              <ErrorMessage name=\"電話\" class=\"invalid-feedback\"></ErrorMessage>\n            </label>\n            <FieldView\n              id=\"phone\"\n              name=\"電話\"\n              type=\"text\"\n              :class=\"{ 'is-invalid': errors['電話'] }\"\n              placeholder=\"請輸入電話\"\n              :rules=\"isPhone\"\n              v-model=\"form.user.tel\"\n            ></FieldView>\n          </div>\n          <div class=\"form-control mb-2\">\n            <label for=\"message\" class=\"mb-1\">留言</label>\n            <FieldView\n              id=\"message\"\n              name=\"message\"\n              type=\"text\"\n              v-model=\"form.message\"\n              as=\"textarea\"\n            ></FieldView>\n          </div>\n        </div>\n        <div class=\"col-lg-6 mt-7 mb-sm-7\">\n          <div class=\"row\">\n            <div class=\"col-sm-6\">\n              <div\n                class=\"pay_credit\"\n                :class=\"{ active: is_credit == true }\"\n                @click=\"is_credit = true\"\n              >\n                <span>信用卡付款</span>\n                <span class=\"icon\">\n                  <CreditCardIcon></CreditCardIcon>\n                </span>\n              </div>\n            </div>\n            <div class=\"col-sm-6\">\n              <div\n                class=\"pay_cash\"\n                :class=\"{ active: is_credit == false }\"\n                @click=\"is_credit = false\"\n              >\n                <span>現金付款</span>\n                <span class=\"icon\">\n                  <CashIcon></CashIcon>\n                </span>\n              </div>\n            </div>\n            <div class=\"col-lg-12 d-sm-none\">\n              <button\n                class=\"user-btn user-btn-primary w-100 py-4 mb-0 mt-auto f-size-xs\"\n                type=\"submit\"\n              >\n                下一步：完成付款\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <button\n        class=\"cart-check-btn user-btn user-btn-primary w-100 py-3 f-size-xs\"\n        type=\"submit\"\n      >下一步：完成付款</button>\n    </FormView>\n  </div>\n</template>\n\n<script>\nimport { CreditCardIcon, CashIcon } from '@heroicons/vue/outline'\nexport default {\n  props: ['show'],\n  data () {\n    return {\n      is_credit: false,\n      is_show: false,\n      form: {\n        user: {}\n      }\n    }\n  },\n  components: {\n    CreditCardIcon,\n    CashIcon\n  },\n  methods: {\n    onSubmit () {\n      this.$emitter.emit('isLoading', true)\n      const order = this.form\n      this.$http\n        .post(`${process.env.VUE_APP_APIURL}/api/${process.env.VUE_APP_PATH}/order`, { data: order })\n        .then((res) => {\n          if (this.is_credit) {\n            this.payOrder(res.data.orderId)\n            return\n          }\n          this.$emitter.emit('isLoading', false)\n          this.$emitter.emit('updateCart', { carts: [] })\n          this.$router.push({ name: '完成結帳頁面', params: { show_complete: true, id: res.data.orderId } })\n        })\n        .catch((err) => {\n          this.$emitter.emit('isLoading', false)\n          this.$httpMessageState(err.response, '結帳')\n        })\n    },\n    payOrder (orderId) {\n      this.$http\n        .post(`${process.env.VUE_APP_APIURL}/api/${process.env.VUE_APP_PATH}/pay/${orderId}`)\n        .then(() => {\n          this.$emitter.emit('isLoading', false)\n          this.$emitter.emit('updateCart', { carts: [] })\n          this.$router.push({ name: '完成結帳頁面', params: { show_complete: true, id: orderId } })\n        })\n        .catch((err) => {\n          this.$emitter.emit('isLoading', false)\n          this.$httpMessageState(err.response, '信用卡付款')\n        })\n    },\n    isPhone (value) {\n      const phoneNumber = /^(09)[0-9]{8}$/\n      return phoneNumber.test(value) ? true : '需要正確的電話號碼'\n    }\n  },\n  mounted () {\n    if (this.show) {\n      this.is_show = true\n      this.$emitter.emit('changeBar', 2)\n    } else {\n      this.$router.push('/cart')\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.userInfo {\n  h3 {\n    background-color: #f5f5f5;\n    font-size: 20px;\n    border-top: 1px solid #ccc;\n    border-bottom: 1px solid #ccc;\n  }\n  form {\n    label {\n      display: block;\n      font-weight: 400;\n      letter-spacing: 1.3px;\n    }\n    input,\n    select,\n    textarea {\n      padding: 4px 12px;\n      font-size: 18px;\n      width: 100%;\n    }\n    textarea {\n      min-height: 200px;\n    }\n  }\n  .is-invalid {\n    border: 1px solid red;\n  }\n  .invalid-feedback {\n    color: red;\n    font-weight: 400;\n  }\n  .pay_credit,\n  .pay_cash {\n    border: 1px solid #ccc;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 30px;\n    border-radius: 10px;\n    cursor: pointer;\n    margin-bottom: 30px;\n    transition: 0.7s;\n    span {\n      text-align: center;\n      margin: 0 4px;\n    }\n    &:hover,\n    &.active {\n      border: 1px solid $primary;\n      background-color: $primary;\n      color: white;\n    }\n  }\n  .icon {\n    display: block;\n    width: 40px;\n    height: 40px;\n  }\n  .cart-check-btn{\n    display: none;\n    @include mobile{\n      position: fixed;\n      margin-left: -15px;\n      margin-bottom: -2px;\n      width: 100%;\n      bottom: 0;\n      display: block;\n    }\n  }\n}\n</style>\n","import { createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport default function render(_ctx, _cache) {\n  return (_openBlock(), _createBlock(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    \"stroke-width\": \"2\",\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\"\n  }, [\n    _createVNode(\"path\", {\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\",\n      d: \"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z\"\n    })\n  ]))\n}","import { createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport default function render(_ctx, _cache) {\n  return (_openBlock(), _createBlock(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    \"stroke-width\": \"2\",\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\"\n  }, [\n    _createVNode(\"path\", {\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\",\n      d: \"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z\"\n    })\n  ]))\n}","import { render } from \"./PayView2.vue?vue&type=template&id=8710fe86\"\nimport script from \"./PayView2.vue?vue&type=script&lang=js\"\nexport * from \"./PayView2.vue?vue&type=script&lang=js\"\n\nimport \"./PayView2.vue?vue&type=style&index=0&id=8710fe86&lang=scss\"\n\nimport exportComponent from \"/Users/ginjack/Desktop/vue-week6/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","value","type","_createElementBlock","_hoisted_2","_createVNode","_component_FormView","onSubmit","$options","errors","_component_ErrorMessage","name","_component_FieldView","id","placeholder","rules","$data","user","$event","email","as","address","_hoisted_14","_hoisted_15","_hoisted_16","tel","_hoisted_21","message","active","onClick","_hoisted_25","_component_CreditCardIcon","_hoisted_28","_component_CashIcon","_hoisted_30","_hoisted_31","render","_ctx","_cache","_openBlock","_createBlock","xmlns","fill","viewBox","stroke","d","props","data","is_credit","is_show","form","components","CreditCardIcon","CashIcon","methods","this","$emitter","emit","order","$http","post","then","res","payOrder","orderId","carts","$router","push","params","show_complete","catch","err","$httpMessageState","response","isPhone","phoneNumber","test","mounted","show","__exports__"],"sourceRoot":""}