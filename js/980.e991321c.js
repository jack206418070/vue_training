"use strict";(self["webpackChunkvue_week6"]=self["webpackChunkvue_week6"]||[]).push([[980],{5980:function(t,e,a){a.r(e),a.d(e,{default:function(){return A}});var s=a(3396),i=a(7139),c=a(9242);const o={class:"container"},r={class:"mobile-search-content"},l={class:"search d-flex jy-content-between"},n={class:"category-bar"},d={class:"d-flex"},u=(0,s.Uk)(" 全部商品 "),h=(0,s.Uk)(" 我的最愛 "),m=["onClick"],p={class:"container"},_={class:"user-product mt-10 mb-10"},w={class:"row"},v={class:"col-md-3 d-md-none mt-10"},g={class:"user-side-menu mt-10"},y={class:"search"},x=(0,s._)("h3",{class:"text-title mb-2"},"輸入關鍵字",-1),f={class:"user-menu"},C={class:"menu-item mt-10"},k=(0,s._)("h3",{class:"text-medium text-c-thirdary f-size-xs mb-5"},"放心初精選",-1),b={class:"mt-1"},$=(0,s.Uk)(" 全部商品 "),D=(0,s.Uk)(" 我的最愛 "),P=["onClick"],q={class:"col-md-9 mt-20 mt-sm-0"},L={class:"content pb-3"};function W(t,e,a,W,z,j){const M=(0,s.up)("router-link"),T=(0,s.up)("router-view"),U=(0,s.up)("CartView");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",{class:(0,i.C_)(["mobile-search d-none d-md-block",{status:z.status}])},[(0,s._)("div",o,[(0,s._)("div",r,[(0,s._)("div",l,[(0,s.wy)((0,s._)("input",{type:"text",placeholder:"請輸入商品名稱","onUpdate:modelValue":e[0]||(e[0]=t=>z.searchText=t)},null,512),[[c.nr,z.searchText,void 0,{trim:!0}]]),(0,s._)("button",{class:"user-btn user-btn-gary",type:"button",onClick:e[1]||(e[1]=(...t)=>j.searchProduct&&j.searchProduct(...t))},"查詢")]),(0,s._)("div",n,[(0,s._)("ul",d,[(0,s._)("li",{onClick:e[2]||(e[2]=t=>z.is_active="全部商品"),class:(0,i.C_)({active:"全部商品"===z.is_active})},[(0,s.Wm)(M,{to:{name:"全部商品",query:{category:"全部商品"}}},{default:(0,s.w5)((()=>[u])),_:1})],2),(0,s._)("li",{onClick:e[3]||(e[3]=t=>z.is_active="我的最愛"),class:(0,i.C_)({active:"我的最愛"===z.is_active})},[(0,s.Wm)(M,{to:{name:"全部商品",query:{category:"我的最愛"}}},{default:(0,s.w5)((()=>[h])),_:1})],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(z.category,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t,onClick:e=>z.is_active=t,class:(0,i.C_)({active:z.is_active===t})},[(0,s.Wm)(M,{to:{name:"全部商品",query:{category:t}}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(t),1)])),_:2},1032,["to"])],10,m)))),128))])])])])],2),(0,s._)("div",p,[(0,s._)("div",_,[(0,s._)("div",w,[(0,s._)("div",v,[(0,s._)("div",g,[(0,s._)("div",y,[x,(0,s.wy)((0,s._)("input",{type:"text my-2",placeholder:"請輸入商品名稱",name:"name","onUpdate:modelValue":e[4]||(e[4]=t=>z.searchText=t)},null,512),[[c.nr,z.searchText,void 0,{trim:!0}]]),(0,s._)("button",{class:"user-btn user-btn-gray my-4 py-2",type:"button",onClick:e[5]||(e[5]=(...t)=>j.searchProduct&&j.searchProduct(...t))}," 查詢 ")]),(0,s._)("ul",f,[(0,s._)("li",C,[k,(0,s._)("ul",b,[(0,s._)("li",{class:(0,i.C_)(["text-medium f-w-bold mb-3",{active:"全部商品"===z.is_active}]),onClick:e[6]||(e[6]=t=>z.is_active="全部商品")},[(0,s.Wm)(M,{to:{name:"全部商品",query:{category:"全部商品"}}},{default:(0,s.w5)((()=>[$])),_:1})],2),(0,s._)("li",{class:(0,i.C_)(["text-medium f-w-bold mb-3",{active:"我的最愛"===z.is_active}]),onClick:e[7]||(e[7]=t=>z.is_active="我的最愛")},[(0,s.Wm)(M,{to:{name:"全部商品",query:{category:"我的最愛"}}},{default:(0,s.w5)((()=>[D])),_:1})],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(z.category,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t,class:(0,i.C_)(["text-medium f-w-bold mb-3",{active:z.is_active===t}]),onClick:e=>z.is_active=t},[(0,s.Wm)(M,{to:{name:"全部商品",query:{category:t}}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(t),1)])),_:2},1032,["to"])],10,P)))),128))])])])])]),(0,s._)("div",q,[(0,s._)("div",L,[(0,s.Wm)(T)])])])])]),(0,s.Wm)(U,{"cart-data":z.cart,onGetCart:j.getCart},null,8,["cart-data","onGetCart"])],64)}const z={class:"cart-modal bg-secondary"},j={class:"cart-modal-content p-3"},M={class:"title d-flex jy-content-between align-items-center"},T=(0,s._)("h4",{class:"text-medium text-c-white f-size-xs"},"已選購清單",-1),U={class:"user-content"},S=(0,s.uE)('<li class="user-content-title d-flex jy-content-between"><p class="name text-c-white">商品名稱</p><p class="qty text-c-white">數量</p><p class="onePrice text-c-white">單價</p><p class="totalprice text-c-white">總價</p><p class="delete"></p></li>',1),O={class:"name text-c-white"},H={class:"qty text-c-white"},V={class:"onePrice text-c-white"},Y={class:"totalprice text-c-white"},K=["onClick"],E={class:"text-c-white"};function G(t,e,a,o,r,l){const n=(0,s.up)("XIcon");return(0,s.wg)(),(0,s.iD)("div",z,[(0,s.wy)((0,s._)("div",j,[(0,s._)("div",M,[T,(0,s._)("a",{onClick:e[0]||(e[0]=(0,c.iM)(((...t)=>l.controlModal&&l.controlModal(...t)),["prevent"])),class:"close text-c-white",href:"#"},[(0,s.Wm)(n)])]),(0,s._)("div",U,[(0,s._)("ul",null,[S,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.cart.carts,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.id,class:"user-content-inner d-flex align-items-center jy-content-between"},[(0,s._)("p",O,(0,i.zw)(t.product.title),1),(0,s._)("p",H,(0,i.zw)(t.qty),1),(0,s._)("p",V,"$"+(0,i.zw)(t.product.price),1),(0,s._)("p",Y,"$"+(0,i.zw)(t.total),1),(0,s._)("a",{onClick:(0,c.iM)((e=>l.delCartProducts(t.id)),["prevent"]),class:"delete text-c-white",href:"#"},[(0,s.Wm)(n)],8,K)])))),128))])])],512),[[c.F8,r.isShow]]),(0,s._)("div",{onClick:e[1]||(e[1]=(...t)=>l.controlModal&&l.controlModal(...t)),class:"cart-modal-btn bg-secondary p-3"},[(0,s._)("p",E,"已購 $"+(0,i.zw)(r.cart.total),1)])])}function I(t,e){return(0,s.wg)(),(0,s.j4)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[(0,s.Wm)("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})])}var X={props:["cartData"],emits:["getCart"],data(){return{isShow:!1,cart:[]}},components:{XIcon:I},methods:{controlModal(){this.isShow=!this.isShow},delCartProducts(t){this.$emitter.emit("isLoading",!0),this.$http.delete(`https://vue3-course-api.hexschool.io/v2/api/ginjack/cart/${t}`).then((()=>{this.$emit("getCart")})).catch((t=>{console.dir(t),this.$emitter.emit("isLoading",!1)}))}},watch:{cartData(){this.cart=this.cartData}},mounted(){this.cart=this.cartData}},Z=a(89);const B=(0,Z.Z)(X,[["render",G]]);var F=B,J={data(){return{cart:[],is_show_banner:!0,category:[],is_active:"",searchText:"",status:!1}},components:{CartView:F},methods:{getCart(){this.$emitter.emit("isLoading",!0),this.$http.get("https://vue3-course-api.hexschool.io/v2/api/ginjack/cart").then((t=>{this.cart=t.data.data,this.$emitter.emit("isLoading",!1),this.$emitter.emit("updateCart",t.data.data)})).catch((t=>{console.dir(t),this.$emitter.emit("isLoading",!1)}))},getCategory(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/ginjack/products/all").then((t=>{const e=[];t.data.products.forEach((t=>{e.push(t.category)})),this.category=[...new Set(e)]})).catch((t=>{console.log(t)}))},searchProduct(){""!==this.searchText&&(this.$emitter.emit("isLoading",!0),this.$http.get("https://vue3-course-api.hexschool.io/v2/api/ginjack/products/all").then((t=>{const e=t.data.products.filter((t=>-1!==t.title.indexOf(this.searchText)));this.$router.push({name:"全部商品",params:{products:JSON.stringify(e)}}),this.$emitter.emit("isLoading",!1),this.searchText=""})).catch((t=>{console.dir(t)})))}},watch:{$route(t,e){-1!==t.fullPath.indexOf("/product/")?(this.is_active="",this.status=!0):(this.status=!1,this.is_active=this.$route.query.category||"全部商品")}},mounted(){this.getCart(),this.getCategory(),this.$emitter.on("updateCart",(t=>{this.cart=t})),-1!==this.$route.fullPath.indexOf("/product/")?this.status=!0:-1!==this.$route.fullPath.indexOf("/product")&&(this.status=!1,this.is_active=this.$route.query.category||"全部商品")},unmounted(){this.$emitter.off("updateCart")}};const N=(0,Z.Z)(J,[["render",W]]);var A=N}}]);
//# sourceMappingURL=980.e991321c.js.map